<!DOCTYPE html><html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Інформаційна панель погоди</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; color: #333; padding: 30px; transition: background 0.3s, color 0.3s; }
    h1 { color: #2c3e50; }
    table, th, td { border: 1px solid #ccc; border-collapse: collapse; padding: 10px; }
    table { margin-top: 10px; width: 100%; max-width: 600px; }
    th { background: #eee; }
    .dark { background: #121212; color: #eee; }
    .dark th { background: #333; }
    #map { width: 100%; height: 300px; margin-top: 20px; border: none; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1em; }
    #weather-icon { font-size: 2em; }
  </style>
</head>
<body>
  <h1>🌤️ Погода та інформація про вас</h1>
  <div id="clock">Час: ...</div>
  <div id="weather">Завантаження погоди…</div>
  <div id="weather-icon"></div>
  <div id="wind-dir" style="font-size:2em;">🧭</div>  <h2>📈 Графік температури</h2>
  <canvas id="tempChart" width="400" height="200"></canvas>  <h2>🧭 Карта місцезнаходження</h2>
  <iframe id="map"></iframe>  <h2>👤 Ваша інформація</h2>
  <table>
    <tr><th>IP</th><td id="ip">-</td></tr>
    <tr><th>Місто</th><td id="city">-</td></tr>
    <tr><th>Країна</th><td id="country">-</td></tr>
    <tr><th>Браузер</th><td id="browser">-</td></tr>
    <tr><th>ОС</th><td id="os">-</td></tr>
    <tr><th>Часовий пояс</th><td id="timezone">-</td></tr>
    <tr><th>Камера/Мікрофон</th><td id="media">-</td></tr>
    <tr><th>WebGL</th><td id="webgl">-</td></tr>
    <tr><th>RAM</th><td id="ram">-</td></tr>
    <tr><th>Кількість ядер</th><td id="cpu">-</td></tr>
    <tr><th>FPS (оцінка)</th><td id="fps">-</td></tr>
  </table><button onclick="toggleTheme()">🌗 Перемкнути тему</button> <button onclick="copyInfo()">📋 Копіювати інформацію</button>

  <script>
    // Темна тема автоматично
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.body.classList.add('dark');
    }

    function toggleTheme() {
      document.body.classList.toggle('dark');
    }

    function updateClock() {
      document.getElementById('clock').textContent = "Час: " + new Date().toLocaleTimeString();
    }
    setInterval(updateClock, 1000);
    updateClock();

    const ua = navigator.userAgent;
    const platform = navigator.platform;
    const browser = ua.includes("Firefox") ? "Firefox" : ua.includes("Edg") ? "Edge" : ua.includes("Chrome") ? "Chrome" : "Інше";
    document.getElementById('browser').textContent = browser;
    document.getElementById('os').textContent = platform;
    document.getElementById('timezone').textContent = Intl.DateTimeFormat().resolvedOptions().timeZone;
    document.getElementById('cpu').textContent = navigator.hardwareConcurrency || 'Невідомо';
    document.getElementById('ram').textContent = navigator.deviceMemory ? navigator.deviceMemory + ' GB' : 'Невідомо';

    // FPS
    let last = performance.now(), fps = 0;
    function measureFPS() {
      const now = performance.now();
      const delta = now - last;
      last = now;
      fps = Math.round(1000 / delta);
      document.getElementById('fps').textContent = fps + ' FPS';
      requestAnimationFrame(measureFPS);
    }
    measureFPS();

    // WebGL
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
    document.getElementById('webgl').textContent = gl ? 'Підтримується' : 'Ні';

    // Камера/Мікрофон
    navigator.mediaDevices.enumerateDevices().then(devices => {
      const media = devices.some(d => d.kind === 'videoinput' || d.kind === 'audioinput');
      document.getElementById('media').textContent = media ? 'Так' : 'Ні';
    });

    fetch('https://ipwho.is/')
      .then(res => res.json())
      .then(location => {
        const lat = location.latitude;
        const lon = location.longitude;
        document.getElementById('ip').textContent = location.ip;
        document.getElementById('city').textContent = location.city;
        document.getElementById('country').textContent = location.country;

        document.getElementById("map").src =
          `https://www.openstreetmap.org/export/embed.html?bbox=${lon-0.02}%2C${lat-0.02}%2C${lon+0.02}%2C${lat+0.02}&layer=mapnik&marker=${lat}%2C${lon}`;

        fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=temperature_2m_max,temperature_2m_min&timezone=auto`)
          .then(res => res.json())
          .then(data => {
            const weather = data.current_weather;
            const code = weather.weathercode;
            const icons = { 0: "☀️", 1: "🌤️", 2: "⛅", 3: "☁️", 45: "🌫️", 48: "🌫️", 51: "🌦️", 61: "🌧️", 71: "❄️", 80: "🌧️", 95: "⛈️" };
            document.getElementById('weather-icon').textContent = icons[code] || "❓";
            document.getElementById('weather').innerHTML =
              `🌡️ Температура: <strong>${weather.temperature}°C</strong><br>` +
              `💨 Вітер: ${weather.windspeed} км/год`;
            document.getElementById('wind-dir').style.transform = `rotate(${weather.winddirection}deg)`;

            // Графік температури
            const chart = new Chart(document.getElementById('tempChart'), {
              type: 'line',
              data: {
                labels: data.daily.time.slice(0, 3),
                datasets: [
                  {
                    label: 'Макс °C',
                    data: data.daily.temperature_2m_max.slice(0, 3),
                    borderColor: 'red',
                    fill: false
                  },
                  {
                    label: 'Мін °C',
                    data: data.daily.temperature_2m_min.slice(0, 3),
                    borderColor: 'blue',
                    fill: false
                  }
                ]
              },
              options: {
                responsive: true,
                plugins: {
                  legend: { position: 'top' },
                  title: { display: true, text: 'Прогноз температури на 3 дні' }
                }
              }
            });
          });
      })
      .catch(() => {
        document.getElementById('weather').textContent = 'Не вдалося визначити місцезнаходження.';
      });

    function copyInfo() {
      const rows = document.querySelectorAll('table td');
      const info = Array.from(rows).map(td => td.textContent).join('\n');
      navigator.clipboard.writeText(info).then(() => alert('Інформацію скопійовано!'));
    }
  </script></body>
</html>
