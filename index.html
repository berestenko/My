<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Ğ†Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ğ¹Ğ½Ğ° Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ¸</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; color: #333; padding: 30px; transition: background 0.3s, color 0.3s; }
    h1 { color: #2c3e50; }
    table, th, td { border: 1px solid #ccc; border-collapse: collapse; padding: 10px; }
    table { margin-top: 10px; width: 100%; max-width: 600px; }
    th { background: #eee; }
    .dark { background: #121212; color: #eee; }
    .dark th { background: #333; }
    #map { width: 100%; height: 300px; margin-top: 20px; border: none; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 1em; }
    #weather-icon { font-size: 2em; }
  </style>
</head>
<body>
  <h1>ğŸŒ¤ï¸ ĞŸĞ¾Ğ³Ğ¾Ğ´Ğ° Ñ‚Ğ° Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ Ğ¿Ñ€Ğ¾ Ğ²Ğ°Ñ</h1>
  <div id="clock">Ğ§Ğ°Ñ: ...</div>
  <div id="weather">Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ¸â€¦</div>
  <div id="weather-icon"></div>
  <div id="wind-dir" style="font-size:2em;">ğŸ§­</div>

  <h2>ğŸ“† ĞŸÑ€Ğ¾Ğ³Ğ½Ğ¾Ğ· Ğ½Ğ° 3 Ğ´Ğ½Ñ–</h2>
  <table id="forecast"><tr><th>Ğ”Ğ°Ñ‚Ğ°</th><th>ĞœĞ°ĞºÑ</th><th>ĞœÑ–Ğ½</th></tr></table>

  <h2>ğŸ§­ ĞšĞ°Ñ€Ñ‚Ğ° Ğ¼Ñ–ÑÑ†ĞµĞ·Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¶ĞµĞ½Ğ½Ñ</h2>
  <iframe id="map"></iframe>

  <h2>ğŸ‘¤ Ğ’Ğ°ÑˆĞ° Ñ–Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ñ–Ñ</h2>
  <table>
    <tr><th>IP</th><td id="ip">-</td></tr>
    <tr><th>ĞœÑ–ÑÑ‚Ğ¾</th><td id="city">-</td></tr>
    <tr><th>ĞšÑ€Ğ°Ñ—Ğ½Ğ°</th><td id="country">-</td></tr>
    <tr><th>Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€</th><td id="browser">-</td></tr>
    <tr><th>ĞĞ¡</th><td id="os">-</td></tr>
    <tr><th>Ğ§Ğ°ÑĞ¾Ğ²Ğ¸Ğ¹ Ğ¿Ğ¾ÑÑ</th><td id="timezone">-</td></tr>
  </table>

  <button onclick="toggleTheme()">ğŸŒ— ĞŸĞµÑ€ĞµĞ¼ĞºĞ½ÑƒÑ‚Ğ¸ Ñ‚ĞµĞ¼Ñƒ</button>

  <script>
    // Ğ“Ğ¾Ğ´Ğ¸Ğ½Ğ½Ğ¸Ğº
    function updateClock() {
      document.getElementById('clock').textContent = "Ğ§Ğ°Ñ: " + new Date().toLocaleTimeString();
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€, ĞĞ¡, Ñ‡Ğ°Ñ. Ğ¿Ğ¾ÑÑ
    const ua = navigator.userAgent;
    const platform = navigator.platform;
    let browser = 'ĞĞµĞ²Ñ–Ğ´Ğ¾Ğ¼Ğ¾';
    if (ua.includes("Firefox")) browser = "Firefox";
    else if (ua.includes("Edg")) browser = "Edge";
    else if (ua.includes("Chrome")) browser = "Chrome";
    else if (ua.includes("Safari")) browser = "Safari";
    document.getElementById('browser').textContent = browser;
    document.getElementById('os').textContent = platform;
    document.getElementById('timezone').textContent = Intl.DateTimeFormat().resolvedOptions().timeZone;

    // Ğ¢ĞµĞ¼Ğ½Ğ° Ñ‚ĞµĞ¼Ğ°
    function toggleTheme() {
      document.body.classList.toggle('dark');
    }

    // ĞÑ‚Ñ€Ğ¸Ğ¼ÑƒÑ”Ğ¼Ğ¾ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ¸ Ñ‚Ğ° IP
    fetch('https://ipwho.is/')
      .then(res => res.json())
      .then(location => {
        const lat = location.latitude;
        const lon = location.longitude;
        const city = location.city;
        const country = location.country;
        document.getElementById('ip').textContent = location.ip;
        document.getElementById('city').textContent = city;
        document.getElementById('country').textContent = country;

        // ĞšĞ°Ñ€Ñ‚Ğ°
        document.getElementById("map").src =
          `https://www.openstreetmap.org/export/embed.html?bbox=${lon-0.02}%2C${lat-0.02}%2C${lon+0.02}%2C${lat+0.02}&layer=mapnik&marker=${lat}%2C${lon}`;

        // ĞŸĞ¾Ñ‚Ğ¾Ñ‡Ğ½Ğ° Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°
        fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=temperature_2m_max,temperature_2m_min&timezone=auto`)
          .then(res => res.json())
          .then(data => {
            const weather = data.current_weather;
            const code = weather.weathercode;
            const icons = {
              0: "â˜€ï¸", 1: "ğŸŒ¤ï¸", 2: "â›…", 3: "â˜ï¸",
              45: "ğŸŒ«ï¸", 48: "ğŸŒ«ï¸", 51: "ğŸŒ¦ï¸", 61: "ğŸŒ§ï¸",
              71: "â„ï¸", 80: "ğŸŒ§ï¸", 95: "â›ˆï¸"
            };
            document.getElementById('weather-icon').textContent = icons[code] || "â“";

            document.getElementById('weather').innerHTML =
              `ğŸŒ¡ï¸ Ğ¢ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°: <strong>${weather.temperature}Â°C</strong><br>` +
              `ğŸ’¨ Ğ’Ñ–Ñ‚ĞµÑ€: ${weather.windspeed} ĞºĞ¼/Ğ³Ğ¾Ğ´`;

            document.getElementById('wind-dir').style.transform = `rotate(${weather.winddirection}deg)`;

            // ĞŸÑ€Ğ¾Ğ³Ğ½Ğ¾Ğ·
            const dates = data.daily.time;
            const max = data.daily.temperature_2m_max;
            const min = data.daily.temperature_2m_min;
            let rows = '';
            for (let i = 0; i < 3; i++) {
              rows += `<tr><td>${dates[i]}</td><td>${max[i]}Â°C</td><td>${min[i]}Â°C</td></tr>`;
            }
            document.getElementById('forecast').innerHTML += rows;
          });
      })
      .catch(() => {
        document.getElementById('weather').textContent = 'ĞĞµ Ğ²Ğ´Ğ°Ğ»Ğ¾ÑÑ Ğ²Ğ¸Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚Ğ¸ Ğ¼Ñ–ÑÑ†ĞµĞ·Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¶ĞµĞ½Ğ½Ñ.';
      });
  </script>
</body>
</html>
